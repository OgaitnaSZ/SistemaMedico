<section class="p-4 md:px-0">
  <h1 class="text-5xl font-medium text-gray-900 dark:text-gray-100">Configuración</h1>
</section>

<section class="max-w-4xl w-full mx-auto p-4 md:p-6 bg-white dark:bg-gray-800 rounded-lg shadow space-y-6">
  <div class="grid md:grid-cols-2 gap-6">
    <!-- Formulario de Actualización de Datos -->
    <form (ngSubmit)="onChange()" class="space-y-4 bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow">
      <h2 class="text-xl font-bold flex items-center gap-2 text-gray-800 dark:text-gray-100">
        <span class="material-symbols-outlined text-blue-500">account_circle</span>
        Actualizar Datos
      </h2>

      <div class="space-y-2">
        <label class="block text-sm text-gray-700 dark:text-gray-300">Nombre</label>
        <input [(ngModel)]="nombre" name="nombre" type="text"
          class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="space-y-2">
          <label class="block text-sm text-gray-700 dark:text-gray-300">Usuario</label>
          <input [(ngModel)]="user" name="user" type="text"
            class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>

          <div class="space-y-2">
            <label class="block text-sm text-gray-700 dark:text-gray-300">Contraseña Actual</label>
            <input [(ngModel)]="oldPass" name="oldPass" type="password"
              class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <button type="submit"
              class="w-full bg-blue-500 hover:bg-blue-700 text-white font-semibold py-2 rounded-lg transition-colors duration-200">
              Guardar Cambios
            </button>
          </form>

          <!-- Formulario de Contraseña -->
          <form (ngSubmit)="onChangePass()" class="space-y-4 bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow">
            <h2 class="text-xl font-bold flex items-center gap-2 text-gray-800 dark:text-gray-100">
              <span class="material-symbols-outlined text-red-400">lock</span>
              Cambiar Contraseña
            </h2>

            <div class="space-y-2">
              <label class="block text-sm text-gray-700 dark:text-gray-300">Contraseña Actual</label>
              <input [(ngModel)]="oldPass" name="oldPass" type="password"
                class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400">
              </div>

              <div class="space-y-2">
                <label class="block text-sm text-gray-700 dark:text-gray-300">Nueva Contraseña</label>
                <input [(ngModel)]="newPass" name="newPass" type="password"
                  class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400">
                </div>

                <div class="space-y-2">
                  <label class="block text-sm text-gray-700 dark:text-gray-300">Confirmar Nueva Contraseña</label>
                  <input [(ngModel)]="confirmPass" name="confirmPass" type="password"
                    class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400">
                  </div>

                  <button type="submit"
                    class="w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 rounded-lg transition-colors duration-200">
                    Cambiar Contraseña
                  </button>
                </form>
              </div>
              <p class="w-full text-center">
                <span class="text-green-500">{{ success }}</span>
                <span class="text-red-400">{{ error }} </span>
              </p>

              <!-- Toggle de Modo Oscuro -->
              <div class="pt-4 border-t dark:border-gray-700">
                <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4">Tema</h2>

                <div class="flex items-center justify-between">
                  <label class="text-sm text-gray-700 dark:text-gray-300">Modo Oscuro</label>

                  <button
                    id="theme-toggle"
                    type="button"
                    (click)="toggleTheme()"
                    [attr.aria-label]="isDark ? 'Cambiar a modo claro' : 'Cambiar a modo oscuro'"
          [ngClass]="{
          'flex items-center justify-between w-16 h-8 rounded-full p-1 transition-colors duration-300 focus:outline-none': true,
          'bg-gray-200': !isDark,
          'bg-blue-500': isDark
          }"
                    >
                    <!-- Circulo deslizante con icono -->
                    <div
                      class="flex items-center justify-center w-6 h-6 rounded-full shadow-md transform transition-transform duration-300"
          [ngClass]="{
              'translate-x-0 bg-white': !isDark,
              'translate-x-8 bg-gray-800': isDark
          }"
                      >
                      <!-- Icono de sol/luna (span en lugar de button) -->
                      @if (!isDark) {
                        <span class="material-symbols-outlined text-yellow-500 switch">light_mode</span>
                      }
                      @if (isDark) {
                        <span class="material-symbols-outlined text-blue-300 switch">dark_mode</span>
                      }
                    </div>
                  </button>
                </div>
              </div>
            </section>
            <!-- Cerrar Session -->
            <section class="max-w-4xl w-full mx-auto px-6 flex justify-end">
              <button (click)="cerrarSession()" class="flex items-center pt-2 text-red-500">
                Cerrar Session
                <span class="material-symbols-outlined ms-2">logout </span>
              </button>
            </section>
